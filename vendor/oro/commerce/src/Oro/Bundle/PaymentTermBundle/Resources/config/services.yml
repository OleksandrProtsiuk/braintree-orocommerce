parameters:
    oro_payment_term.entity.payment_term.class: Oro\Bundle\PaymentTermBundle\Entity\PaymentTerm

services:
    oro_payment_term.payment_term.manager.api:
        class: 'Oro\Bundle\SoapBundle\Entity\Manager\ApiEntityManager'
        parent: oro_soap.manager.entity_manager.abstract
        arguments:
            - '%oro_payment_term.entity.payment_term.class%'
            - "@doctrine.orm.entity_manager"

    oro_payment_term.form.autocomplete.payment_term.search_handler:
        public: false
        parent: oro_form.autocomplete.search_handler
        arguments:
            - '%oro_payment_term.entity.payment_term.class%'
            - ["label"]
        tags:
            - { name: oro_form.autocomplete.search_handler, alias: oro_payment_term, acl_resource: oro_payment_term_view }

    oro_payment_term.payment_term.delete_message_generator:
        class: 'Oro\Bundle\PaymentTermBundle\Twig\DeleteMessageTextGenerator'
        public: false
        arguments:
            - "@router"
            - "@twig"
            - "@oro_payment_term.manager"

    oro_payment_term.manager:
        class: 'Oro\Bundle\PaymentTermBundle\Manager\PaymentTermManager'
        arguments:
            - "@oro_entity.doctrine_helper"
            - "@oro_payment_term.provider.payment_term_association"

    oro_payment_term.twig.delete_message_text_extension:
        class: 'Oro\Bundle\PaymentTermBundle\Twig\DeleteMessageTextExtension'
        public: false
        arguments:
            - "@oro_payment_term.payment_term.delete_message_generator"
        tags:
            - { name: twig.extension }

    oro_payment_term.event_listener.datagrid:
        class: 'Oro\Bundle\PaymentTermBundle\EventListener\DatagridListener'
        arguments:
            - '@oro_payment_term.provider.payment_term_association'
            - '@oro_payment_term.provider.payment_term'
        tags:
            - { name: kernel.event_listener, event: oro_datagrid.datagrid.build.before, method: onBuildBefore }

    oro_payment_term.event_listener.customer_datagrid:
        class: 'Oro\Bundle\PaymentTermBundle\EventListener\CustomerDatagridListener'
        arguments:
            - '@oro_payment_term.provider.payment_term_association'
        tags:
            - { name: kernel.event_listener, event: oro_datagrid.datagrid.build.before.customer-customers-select-grid, method: onBuildBefore, priority: 128 }

    oro_payment_term.provider.payment_term:
        class: 'Oro\Bundle\PaymentTermBundle\Provider\PaymentTermProvider'
        public: false
        arguments:
            - '@security.token_storage'
            - '@event_dispatcher'
            - '@oro_payment_term.provider.payment_term_association'
        tags:
            - { name: layout.data_provider, alias: oro_payment_term_provider }

    oro_payment_term.provider.payment_term_association:
        class: 'Oro\Bundle\PaymentTermBundle\Provider\PaymentTermAssociationProvider'
        arguments:
            - '@oro_entity.doctrine_helper'
            - '@oro_entity_config.provider.extend'
            - '@property_accessor'

    oro_payment_term.migration.extension.payment_term:
        class: 'Oro\Bundle\PaymentTermBundle\Migration\Extension\PaymentTermExtension'
        tags:
            - { name: oro_migration.extension, extension_name: payment_term }

    oro_payment_term.listener.value_render:
        class: 'Oro\Bundle\PaymentTermBundle\EventListener\ValueRenderEventListener'
        arguments:
            - '@oro_payment_term.provider.payment_term_association'
            - '@translator'
            - '@router'
        tags:
            - { name: kernel.event_listener, event: oro.entity_extend_event.before_value_render, method: beforeValueRender }
