parameters:
    oro_warehouse.entity.warehouse.class: Oro\Bundle\WarehouseBundle\Entity\Warehouse
    oro_warehouse.entity.warehouse_address.class: Oro\Bundle\WarehouseBundle\Entity\WarehouseAddress

services:
    oro_warehouse.entity.helper.warehouse_counter:
        class: 'Oro\Bundle\WarehouseBundle\Entity\Helper\WarehouseCounter'
        arguments: ["@oro_entity.doctrine_helper"]

    oro_warehouse.form.autocomplete.warehouse.search_handler:
        public: false
        parent: oro_form.autocomplete.search_handler
        arguments:
            - '%oro_warehouse.entity.warehouse.class%'
            - ["name"]
        tags:
            - { name: oro_form.autocomplete.search_handler, alias: oro_warehouse, acl_resource: oro_warehouse_view }

    oro_warehouse.validator.unique_warehouse:
        class: 'Oro\Bundle\WarehouseBundle\Validator\Constraints\UniqueWarehouseValidator'
        tags:
            - { name: validator.constraint_validator, alias: oro_warehouse_unique_warehouse_validator }

    oro_warehouse.event_listener.system_config:
        class: 'Oro\Bundle\WarehouseBundle\EventListener\WarehouseSystemConfigSubscriber'
        arguments:
            - '@oro_warehouse.system_config_converter'
        tags:
            - { name: kernel.event_listener, event: oro_config.settings_form_preset, method: formPreSet }
            - { name: kernel.event_listener, event: oro_config.settings_before_save, method: beforeSave }

    oro_warehouse.system_config_converter:
        class: 'Oro\Bundle\WarehouseBundle\SystemConfig\WarehouseConfigConverter'
        public: false
        arguments:
            - '@oro_entity.doctrine_helper'
            - '%oro_warehouse.entity.warehouse.class%'

    oro_warehouse.event_listener.form_view:
        class: Oro\Bundle\WarehouseBundle\EventListener\WarehouseFormViewListener
        arguments:
            - '@translator'
            - '@oro_entity.doctrine_helper'
            - '@request_stack'
            - '@oro_warehouse.warehouse_address.provider'
        tags:
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.warehouse-view, method: onWarehouseView }
            - { name: kernel.event_listener, event: oro_ui.scroll_data.before.warehouse-edit, method: onWarehouseEdit }

    oro_warehouse.api.processor.update_inventory_level_with_warehouse.build_query:
        class: 'Oro\Bundle\WarehouseBundle\Api\Processor\BuildSingleInventoryLevelWithWarehouseQuery'
        arguments:
            - '@oro_api.doctrine_helper'
            - '@oro_api.criteria_connector'
            - '@oro_warehouse.entity.helper.warehouse_counter'
        tags:
            - { name: oro.api.processor, action: update, group: build_query, priority: -93, class: '%oro_inventory.entity.inventory_level.class%' }

    oro_warehouse.api.processor.create_inventory_level_with_warehouse.normalize_input:
        class: 'Oro\Bundle\WarehouseBundle\Api\Processor\NormalizeInventoryLevelWithWarehouseRequestData'
        arguments:
            - '@oro_api.doctrine_helper'
            - '@oro_warehouse.entity.helper.warehouse_counter'
        tags:
            - { name: oro.api.processor, action: create, group: normalize_input, priority: -43, class: '%oro_inventory.entity.inventory_level.class%' }

    oro_warehouse.warehouse_address.provider:
        class: Oro\Bundle\WarehouseBundle\Provider\WarehouseAddressProvider
        arguments:
            - '@oro_entity.doctrine_helper'
