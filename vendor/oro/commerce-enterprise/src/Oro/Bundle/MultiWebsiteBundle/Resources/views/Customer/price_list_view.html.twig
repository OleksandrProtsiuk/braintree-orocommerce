{% import 'OroUIBundle::macros.html.twig' as UI %}

<div class="row-fluid form-horizontal">
    <div class="responsive-block">
        {% if priceListsByWebsites %}
            <div class="oro-tabs">
                <ul class="nav nav-tabs">
                    {% for website in websites %}
                        {% set websiteId = website.id %}
                        <li {% if websiteId == websites|first.id %} class="active" {% endif %}>
                            <a href="#website{{ websiteId }}" data-toggle="tab">
                                {{ website.name }}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
                <div class="tab-content">
                    {% for website in websites %}
                        {% set websiteId = website.id %}
                        <div class="tab-pane{% if websiteId == websites|first.id %} active{% endif %} price-list-by-customer-grid"
                             id="website{{ websiteId }}"><br>

                            <p>{{ 'oro.pricing.fallback.label'|trans }}:
                                <strong>
                                    {% if fallbackByWebsites[websiteId] is defined %}
                                        {{ choices[fallbackByWebsites[websiteId]]|trans }}
                                    {% else %}
                                        {{ choices[0]|trans }}
                                    {% endif %}
                                </strong>
                            </p>
                            {% if  priceListsByWebsites[websiteId] is defined %}
                                <table class="grid table-hover table table-bordered">
                                    <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>{{ 'oro.pricing.pricelist.entity_label'|trans }}</th>
                                        <th>{{ 'oro.pricing.pricelist.priority.label'|trans }}</th>
                                        <th>{{ 'oro.pricing.pricelist.merge_allowed.label'|trans }}</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for priceListToCustomer in priceListsByWebsites[websiteId] %}
                                        {% set priceList = priceListToCustomer.priceList %}
                                        <tr class="price_list{{ priceList.id }}">
                                            <td>{{ loop.index }}</td>
                                            <td>
                                                <a href="{{ path('oro_pricing_price_list_view', {'id': priceList.id}) }}"
                                                   class="price_list_link">
                                                    {{ priceList.name }}
                                                </a>
                                            </td>
                                            <td class="price_list_priority">{{ priceListToCustomer.priority }}</td>
                                            <td class="price_list_merge_allowed">
                                                {{ priceListToCustomer.mergeAllowed
                                                ? 'oro.pricing.pricelist.merge_allowed.yes.label'|trans
                                                : 'oro.pricing.pricelist.merge_allowed.no.label'|trans }}</td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            {% endif %}
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% else %}
            <div class="no-data">
                <span>{{ "oro.pricing.no_price_lists"|trans }}</span>
            </div>
        {% endif %}
    </div>
</div>
