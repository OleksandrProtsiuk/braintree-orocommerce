{% extends 'OroCurrencyBundle:Form:fields.html.twig' %}

{% block oro_currency_grid_widget %}
    {% import 'OroUIBundle::macros.html.twig' as UI %}
    <div class="currency-grid-container grid-container oro-item-collection" {{ UI.renderPageComponentAttributes({
        module: 'oroui/js/app/components/view-component',
        options: {
            view: 'oromulticurrency/js/app/views/currency-grid-view',
            autoRender: true,
            currencies: currencyCollection
        }
}) }}>
        <div class="new-currency">
            <input type="hidden" data-name="currency-select">
            <button class="btn btn-primary btn-currency-add" data-name="currency-add">
                {{ 'Add'|trans }}
            </button>
        </div>
        <table class="grid currency-grid table-hover table table-bordered table-condensed">
            <thead>
                <th>{{ 'oro.multi.currency.system_configuration.currency_grid.default'|trans }}</th>
                <th>{{ 'oro.multi.currency.system_configuration.currency_grid.currency_name'|trans }}</th>
                <th>{{ 'oro.multi.currency.system_configuration.currency_grid.currency_code'|trans }}</th>
                <th>{{ 'oro.multi.currency.system_configuration.currency_grid.currency_symbol'|trans }}</th>
                <th class="required">
                    {{ UI.tooltip('oro.multi.currency.system_configuration.currency_grid.tooltip.rate_from') }}
                    {{ 'oro.multi.currency.system_configuration.currency_grid.rate_from'|trans }}
                    <em>*</em>
                </th>
                <th class="required">
                    {{ UI.tooltip('oro.multi.currency.system_configuration.currency_grid.tooltip.rate_to') }}
                    {{ 'oro.multi.currency.system_configuration.currency_grid.rate_to'|trans }}
                    <em>*</em>
                </th>
                <th>{{ 'oro.multi.currency.system_configuration.currency_grid.sort'|trans }}</th>
                <th>{{ 'oro.multi.currency.system_configuration.currency_grid.actions'|trans }}</th>
            </thead>
            <tbody data-name="currency-table-body"></tbody>
        </table>
        {{ form_widget(form) }}
    </div>
{% endblock %}

{% block form_row %}
    {% spaceless %}
    <div class="control-group{% if attr.class is defined %} {{ attr.class }}{% endif %}{% if block_prefixes is defined %} control-group-{{ block_prefixes[1] }}{% endif %} multicurrency-selection-control-group">
        {% if label is not sameas(false) %}
        <div class="control-label wrap">
            {{ form_label(form, '' , { label_attr: label_attr}) }}
        </div>
        {% endif %}
        <div class="controls{% if errors|length > 0 %} validation-error{% endif %}">
            {{ form_widget(form) }}
            {{ form_errors(form) }}
        </div>
    </div>
    {% endspaceless %}
{% endblock form_row %}

{% block oro_multicurrency_row %}
    <div class="control-group">
        <div class="control-label wrap">
            {{ form_label(form) }}
        </div>
        <div class="controls{% if errors|length > 0 %} validation-error{% endif %}">
            {% import 'OroUIBundle::macros.html.twig' as UI %}
            <div class="currency-select-enabled" {{ UI.renderPageComponentAttributes({
                module: 'oroui/js/app/components/view-component',
                options: {
                    view: 'orocurrency/js/app/views/multicurrency-control-view',
                    autoRender: true,
                    rates: currencyRates
                }
            }) }}>
                <div class="multicurrency-fields-wrapper value-field input-append">
                    {{ form_widget(form.value) }}
                    {{ form_widget(form.currency) }}
                </div>
                {% if form.baseCurrencyValue is defined %}
                <div class="base-currency">
                    <div class="base-currency-field input-append">
                        {{ form_widget(form.baseCurrencyValue) }}
                        <span class="add-on">{{ defaultCurrency }}</span>
                    </div>
                </div>
                {% endif %}
                <div class="default-currency-equivalent" data-name="default-currency-equivalent"></div>
                {{ form_errors(form) }}
                {{ form_errors(form.currency) }}
                {{ form_errors(form.value) }}
                {{ form_errors(form.baseCurrencyValue) }}
            </div>
        </div>
    </div>
{% endblock %}
